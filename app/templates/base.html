<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}{% endblock %}</title>
    <link href="{{ url_for('static', filename='css/output.css') }}" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/aee6406d64.js" crossorigin="anonymous"></script>
</head>

<body class="bg-gray-100 font-sans text-gray-900">
    <div class="flex min-h-screen">

        <!-- Sidebar -->
        {% if current_user.is_authenticated %}
        <aside class="hidden md:flex w-64 flex-col bg-white border-r border-gray-300">
            <div class="p-6 border-b border-gray-300">
                <a href="{{ url_for('main.index') }}" class="text-xl font-bold">ContentIdeaHub</a>
            </div>
            <nav class="flex-1 mt-4 space-y-1">
                <a href="{{ url_for('main.index') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
                </a>
                <a href="{{ url_for('main.new_idea') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-plus mr-3"></i> Add Idea
                </a>
                <a href="{{ url_for('main.import_ideas') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-file-import mr-3"></i> Import CSV
                </a>
                <a href="{{ url_for('main.export_ideas') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-file-export mr-3"></i> Export CSV
                </a>
                <a href="{{ url_for('main.logout') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-sign-out-alt mr-3"></i> Logout
                </a>
            </nav>
        </aside>
        {% else %}
        <aside class="hidden md:flex w-64 flex-col bg-white border-r border-gray-300">
            <div class="p-6 border-b border-gray-300">
                <a href="{{ url_for('main.index') }}" class="text-xl font-bold">ContentIdeaHub</a>
            </div>
            <nav class="flex-1 mt-4 space-y-1">
                <a href="{{ url_for('main.login') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-sign-in-alt mr-3"></i> Login
                </a>
                <a href="{{ url_for('main.register') }}"
                    class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-200">
                    <i class="fas fa-user-plus mr-3"></i> Register
                </a>
            </nav>
        </aside>
        {% endif %}

        <!-- Mobile Navbar -->
        <div class="md:hidden w-full bg-white border-b border-gray-300 p-4 flex justify-between items-center">
            <h2 class="text-lg font-bold">ContentIdeaHub</h2>
            <button id="menu-toggle" class="text-gray-700">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <div id="mobile-menu"
            class="hidden absolute top-16 left-0 right-0 bg-white border border-gray-300 rounded-md shadow-md z-20 p-4 md:hidden">
            <a href="{{ url_for('main.index') }}"
                class="block py-2 px-4 text-gray-700 hover:bg-gray-200 rounded">Dashboard</a>
            <a href="{{ url_for('main.new_idea') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-200 rounded">Add
                Idea</a>
            <a href="{{ url_for('main.import_ideas') }}"
                class="block py-2 px-4 text-gray-700 hover:bg-gray-200 rounded">Import CSV</a>
            <a href="{{ url_for('main.export_ideas') }}"
                class="block py-2 px-4 text-gray-700 hover:bg-gray-200 rounded">Export CSV</a>
            <a href="{{ url_for('main.logout') }}"
                class="block py-2 px-4 text-gray-700 hover:bg-gray-200 rounded">Logout</a>
        </div>

        <!-- Main Content -->
        <main class="flex-1 p-8">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="flex items-center p-4 mb-4 border-l-4 
          {% if category == 'success' %} border-green-500 bg-green-50 text-green-800 
          {% else %} border-red-500 bg-red-50 text-red-800 {% endif %}">
                <i
                    class="fas {% if category == 'success' %} fa-check-circle {% else %} fa-exclamation-circle {% endif %} mr-2"></i>
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
        document.getElementById("menu-toggle").addEventListener("click", () => {
            document.getElementById("mobile-menu").classList.toggle("hidden");
        });
    </script>
</body>

</html>